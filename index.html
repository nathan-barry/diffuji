<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>diffuji</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            body {
                background: #f5f0e8;
                color: #2a2a2a;
                font-family: monospace;
                font-size: 14px;
                line-height: 1.6;
                overflow-x: hidden;
            }
            #page {
                width: 40ch;
                max-width: 100%;
                margin: 0 auto;
                padding: 3rem 0;
            }
            pre {
                font: inherit;
                white-space: pre-wrap;
                word-wrap: break-word;
            }
            #viewer {
                width: 80vw;
                max-width: 600px;
                aspect-ratio: 1;
                cursor: grab;
                position: relative;
                left: 50%;
                transform: translateX(-50%);
            }
            #viewer:active {
                cursor: grabbing;
            }
            #viewer canvas {
                width: 100% !important;
                height: 100% !important;
                display: block;
            }
            #hint {
                position: absolute;
                bottom: 0.5rem;
                left: 50%;
                transform: translateX(-50%);
                color: #999;
                pointer-events: none;
                transition: opacity 0.5s;
            }
            #photos {
                width: 80vw;
                max-width: 600px;
                position: relative;
                left: 50%;
                transform: translateX(-50%);
            }
            #photos img {
                width: 100%;
                display: block;
            }
            a {
                color: #2a2a2a;
            }
        </style>
    </head>
    <body>
        <div id="page">
            <!-- prettier-ignore -->
            <pre>
========================================
  DIFFUJI
========================================
a diffusion powered disposable camera
built at treehacks 2026!
</pre>
            <div id="viewer"><span id="hint">[drag to rotate]</span></div>
            <!-- prettier-ignore -->
            <pre>

========================================
  WHAT IS IT?
========================================
diffuji is a disposable camera built
at TreeHacks 2025. a raspberry pi zero
2w with a camera and thermal receipt
printer lives inside a custom housing.

snap a photo, pick a mode, and the
image gets sent to an AI backend that
transforms it -- then prints the result
on receipt paper.

</pre>
            <div id="photos">
                <img src="assets/photos.png" alt="Photos from diffuji" />
            </div>
            <!-- prettier-ignore -->
            <pre>

========================================
  MODES
========================================
FILTER MODES use diffusion models to
restyle your photos:

  * greek statues
  * studio ghibli style
  * replace everyone with ducks
  * time-travel to different years
  * and more...

SEARCH MODES use perplexity web search
to analyze what the camera sees:

  * estimate price of visible items
  * identify objects and landmarks

each request is routed to one of four
AI providers so you can A/B test the
same prompt across different backends:

  [1] OpenAI    (gpt-4o responses api)
  [2] Gemini    (2.5 flash)
  [3] Modal     (flux kontext on h100)
  [4] Perplexity (sonar pro web search)


========================================
TEAM
========================================

  * <a href="https://nathan.rs">Nathan Barry</a>
  * <a href="https://alexkranias.com">Alex Kranias</a>
  * <a href="https://pranav.cc/">Pranav Tadepalli</a>
  * <a href="https://laineylabs.com/">Lainey Leslie</a>


            treehacks 2026
</pre>
        </div>
        <script type="importmap">
            {
                "imports": {
                    "three": "https://cdn.jsdelivr.net/npm/three@0.162.0/build/three.module.js",
                    "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.162.0/examples/jsm/"
                }
            }
        </script>
        <script type="module">
            import * as THREE from "three";
            import { OBJLoader } from "three/addons/loaders/OBJLoader.js";
            import { MTLLoader } from "three/addons/loaders/MTLLoader.js";
            import { OrbitControls } from "three/addons/controls/OrbitControls.js";

            const el = document.getElementById("viewer");
            const hint = document.getElementById("hint");
            const scene = new THREE.Scene();

            const renderer = new THREE.WebGLRenderer({
                antialias: true,
                alpha: true,
            });
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.setSize(el.clientWidth, el.clientHeight);
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;
            el.appendChild(renderer.domElement);

            const cam = new THREE.PerspectiveCamera(35, 1, 0.1, 1000);
            cam.position.set(18, 10, 20);

            const ctrl = new OrbitControls(cam, renderer.domElement);
            ctrl.enableDamping = true;
            ctrl.dampingFactor = 0.06;
            ctrl.enableZoom = false;
            ctrl.enablePan = false;
            ctrl.autoRotate = true;
            ctrl.autoRotateSpeed = 1.5;
            ctrl.minPolarAngle = Math.PI * 0.3;
            ctrl.maxPolarAngle = Math.PI * 0.7;

            let hinted = false;
            ctrl.addEventListener("start", () => {
                if (!hinted) {
                    hint.style.opacity = "0";
                    hinted = true;
                }
            });

            scene.add(new THREE.AmbientLight(0xffffff, 0.6));
            const key = new THREE.DirectionalLight(0xffffff, 1.8);
            key.position.set(10, 15, 10);
            scene.add(key);
            const fill = new THREE.DirectionalLight(0xaabbff, 0.6);
            fill.position.set(-10, 5, -5);
            scene.add(fill);
            const rim = new THREE.DirectionalLight(0xffeedd, 0.8);
            rim.position.set(0, -5, -15);
            scene.add(rim);

            const mtl = new MTLLoader();
            mtl.setPath("assets/");
            mtl.load("camera.mtl", (mats) => {
                mats.preload();
                const obj = new OBJLoader();
                obj.setMaterials(mats);
                obj.setPath("assets/");
                obj.load("camera.obj", (o) => {
                    o.traverse((c) => {
                        if (c.isMesh)
                            c.material = new THREE.MeshStandardMaterial({
                                color: 0x888888,
                                metalness: 0.4,
                                roughness: 0.4,
                            });
                    });
                    o.rotation.x = -Math.PI / 2;
                    o.updateMatrixWorld(true);
                    const box = new THREE.Box3().setFromObject(o);
                    const center = box.getCenter(new THREE.Vector3());
                    o.position.sub(center);
                    scene.add(o);
                    ctrl.target.set(0, -1, 0);
                    ctrl.update();
                });
            });

            window.addEventListener("resize", () => {
                cam.aspect = el.clientWidth / el.clientHeight;
                cam.updateProjectionMatrix();
                renderer.setSize(el.clientWidth, el.clientHeight);
            });

            (function loop() {
                requestAnimationFrame(loop);
                ctrl.update();
                renderer.render(scene, cam);
            })();
        </script>
    </body>
</html>
